specVersion: 0.0.2
description: Treejer V1
repository: https://github.com/SinaHo/treejer-thegraph-v1
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: Planter
    network: rinkeby
    source:
      address: '0x010305A59c3081BF36F4FCc6C89b7249d4763968'
      abi: Planter
      startBlock: 9042600
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Planter
      abis:
        - name: Planter
          file: ./abis/Planter.json
        - name: PlanterFund
          file: ./abis/PlanterFund.json
      eventHandlers:
        - event: PlanterJoin(address)
          handler: handlePlanterJoin
        - event: OrganizationJoin(address)
          handler: handleOrganizationJoin
        - event: PlanterUpdated(address)
          handler: handlePlanterUpdated
        - event: AcceptedByOrganization(address)
          handler: handleAcceptedByOrganization
        - event: RejectedByOrganization(address)
          handler: handleRejectedByOrganization
        - event: PortionUpdated(address)
          handler: handlePortionUpdated
      file: ./src/mappings/Planter.ts
  - kind: ethereum/contract
    name: TreeFactory
    network: rinkeby
    source:
      address: '0xfF08E438a740D297Bb462C2e6F6d462b30E1B7Ae'
      abi: TreeFactory
      startBlock: 9042600
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Tree
        - Planter
        - UpdateTree
        - RegularTree
        - Owner
      abis:
        - name: TreeFactory
          file: ./abis/TreeFactory.json
      eventHandlers:
        - event: TreePlanted(uint256)
          handler: handleTreePlanted
        - event: PlantVerified(uint256)
          handler: handlePlantVerified
        - event: PlantRejected(uint256)
          handler: handlePlantRejected
        - event: RegularTreePlanted(uint256)
          handler: handleRegularTreePlanted
        - event: RegularPlantVerified(uint256)
          handler: handleRegularPlantVerified
        - event: RegularPlantRejected(uint256)
          handler: handleRegularPlantRejected
        - event: TreeUpdated(uint256)
          handler: handleTreeUpdated
        - event: UpdateVerified(uint256)
          handler: handleUpdateVerified
        - event: UpdateRejected(uint256)
          handler: handleUpdateRejected
        - event: TreeAdded(uint256)
          handler: handleTreeAdded
        - event: TreeAssigned(uint256)
          handler: handleTreeAssigned
        - event: bulkReverted(uint256,uint256)
          handler: handlebulkReverted  
      file: ./src/mappings/TreeFactory.ts

  - kind: ethereum/contract
    name: Auction
    network: rinkeby
    source:
      address: '0xA8161e3d1FC68430A8Ec8F24482b8A0e420Ff0C6'
      abi: TreeAuction
      startBlock: 9042600
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Tree
        - Planter
        - Auction
        - Bid
        - Owner
      abis:
        - name: TreeAuction
          file: ./abis/TreeAuction.json
      eventHandlers:
        - event: AuctionCreated(uint256)
          handler: handleAuctionCreated
        - event: HighestBidIncreased(uint256,uint256,address,uint256,address)
          handler: handleHighestBidIncreased
        - event: AuctionSettled(uint256,uint256,address,uint256,address)
          handler: handleAuctionSettled
        - event: AuctionEnded(uint256,uint256)
          handler: handleAuctionEnded
        - event: AuctionEndTimeIncreased(uint256,uint256)
          handler: handleAuctionEndTimeIncreased

      file: ./src/mappings/Auction.ts
  - kind: ethereum/contract
    name: TreeAttribute
    network: rinkeby
    source:
      address: '0xd35a79af94B3f4a59B4f45dD57669883c5bab768'
      abi: TreeAttribute
      startBlock: 9042650
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Tree
        - TreeAttribute
        - TreeWithAttributeProblem
      abis:
        - name: TreeAttribute
          file: ./abis/TreeAttribute.json
      eventHandlers:
        - event: BuyerRankSet(address,uint8)
          handler: handleBuyerRankSet
        # - event: TreeAttributesGenerated(uint256)
        #   handler: handleTreeAttributesGenerated
        - event: TreeAttributesNotGenerated(uint256)
          handler: handleTreeAttributesNotGenerated
      file: ./src/mappings/TreeAttribute.ts
  - kind: ethereum/contract
    name: IncrementalSell
    network: rinkeby
    source:
      address: '0x42E45144F92A272eBB20Fb6827C845f8D4f02480'
      abi: IncrementalSell
      startBlock: 9061500
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Tree
        - IncrementalSell
        - Owner
      abis:
        - name: IncrementalSell
          file: ./abis/IncrementalSell.json
      eventHandlers:
        - event: IncrementalSellUpdated()
          handler: handleIncrementalSellUpdated
        - event: IncrementalRatesUpdated()
          handler: handleIncrementalRatesUpdated
        - event: IncrementalTreeSold(address,address,uint256,uint256,uint256)
          handler: handleIncrementalTreeSold
      file: ./src/mappings/IncrementalSell.ts

  - kind: ethereum/contract
    name: RegularSell
    network: rinkeby
    source:
      address: '0x71Ce798162ceB75CeFF1E480789b9E934890F4ad'
      abi: RegularSell
      startBlock: 9061500
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Tree
        - RegularSell
        - Owner
      abis:
        - name: RegularSell
          file: ./abis/RegularSell.json
      eventHandlers:
        - event: RegularTreeRequsted(address,address,uint256,uint256)
          handler: handleRegularTreeRequsted
        - event: RegularMint(address,uint256,uint256)
          handler: handleRegularMint
        - event: RegularTreeRequstedById(address,address,uint256,uint256)
          handler: handleRegularTreeRequstedById
        - event: TreePriceUpdated(uint256)
          handler: handleTreePriceUpdated
        - event: GiftPerRegularBuyUpdated(uint256)
          handler: handleGiftPerRegularBuyUpdated
        - event: ReferrGiftClaimed(address,uint256,uint256)
          handler: handleReferrGiftClaimed
        - event: RegularPlanterFundSet(uint256,uint256)
          handler: handleRegularPlanterFundSet
      file: ./src/mappings/RegularSell.ts
  - kind: ethereum/contract
    name: FinancialModel
    network: rinkeby
    source:
      address: '0xF8577B3782488E2fA456bc7e6624704388C1230b'
      abi: FinancialModel
      startBlock: 9061500
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - TotalFund
      abis:
        - name: FinancialModel
          file: ./abis/FinancialModel.json
      eventHandlers:
        - event: DistributionModelAdded(uint256)
          handler: handleDistributionModelAdded
        - event: FundDistributionModelAssigned(uint256)
          handler: handleFundDistributionModelAssigned
        # - event: FundDistributionModelAssigned(uint256)
        #   handler: handleFundDistributionModelAssigned
      file: ./src/mappings/FinancialModel.ts

  - kind: ethereum/contract
    name: PlanterFund
    network: rinkeby
    source:
      address: '0x7660aE0Ca1133ff2ff5CdD5Fa1C78d38E2ef07AA'
      abi: PlanterFund
      startBlock: 9062500
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - TotalFund
      abis:
        - name: PlanterFund
          file: ./abis/PlanterFund.json
      eventHandlers:
        - event: PlanterFundSet(uint256,uint256,uint256)
          handler: handlePlanterFundSet
        - event: PlanterFunded(uint256,address,uint256,address)
          handler: handlePlanterFunded
        - event: PlanterBalanceWithdrawn(uint256,address)
          handler: handlePlanterBalanceWithdrawn
      file: ./src/mappings/PlanterFund.ts

  - kind: ethereum/contract
    name: DaiFunds
    network: rinkeby
    source:
      address: '0x78b126fffB366BfC86E48CEE2C83E3cCE43f4771'
      abi: DaiFunds
      startBlock: 9063500
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - TotalFund
      abis:
        - name: DaiFunds
          file: ./abis/DaiFunds.json
        - name: FinancialModel
          file: ./abis/FinancialModel.json
      eventHandlers:
        - event: TreeResearchBalanceWithdrawn(uint256,address,string)
          handler: handleTreeResearchBalanceWithdrawn
        - event: LocalDevelopBalanceWithdrawn(uint256,address,string)
          handler: handleLocalDevelopBalanceWithdrawn
        - event: RescueBalanceWithdrawn(uint256,address,string)
          handler: handleRescueBalanceWithdrawn
        - event: TreejerDevelopBalanceWithdrawn(uint256,address,string)
          handler: handleTreejerDevelopBalanceWithdrawn
        - event: TreeFunded(uint256,uint256,uint256)
          handler: handleTreeFunded

      file: ./src/mappings/DaiFund.ts

  - kind: ethereum/contract
    name: WethFunds
    network: rinkeby
    source:
      address: '0xCDf7214f7BDd1166B3AB6D37D228Bb9A8E3f330e'
      abi: WethFunds
      startBlock: 9063500
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - TotalFund
      abis:
        - name: WethFunds
          file: ./abis/WethFunds.json
        - name: FinancialModel
          file: ./abis/FinancialModel.json
      eventHandlers:
        - event: TreeResearchBalanceWithdrawn(uint256,address,string)
          handler: handleTreeResearchBalanceWithdrawn
        - event: LocalDevelopBalanceWithdrawn(uint256,address,string)
          handler: handleLocalDevelopBalanceWithdrawn
        - event: RescueBalanceWithdrawn(uint256,address,string)
          handler: handleRescueBalanceWithdrawn
        - event: TreejerDevelopBalanceWithdrawn(uint256,address,string)
          handler: handleTreejerDevelopBalanceWithdrawn
        - event: TreeFunded(uint256,uint256,uint256)
          handler: handleTreeFunded
      file: ./src/mappings/WethFunds.ts
