specVersion: 0.0.2
description: Treejer V1
repository: https://github.com/SinaHo/treejer-thegraph-v1
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: Planter
    network: rinkeby
    source:
      address: '0xeF959005acE75f305f006C7e0297e3B3C8AdA7b9'
      abi: Planter
      startBlock: 9042600
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Planter
      abis:
        - name: Planter
          file: ./abis/Planter.json
      eventHandlers:
        - event: PlanterJoin(address)
          handler: handlePlanterJoin
        - event: OrganizationJoin(address)
          handler: handleOrganizationJoin
        - event: PlanterUpdated(address)
          handler: handlePlanterUpdated
        - event: AcceptedByOrganization(address)
          handler: handleAcceptedByOrganization
        - event: RejectedByOrganization(address)
          handler: handleRejectedByOrganization
        - event: PortionUpdated(address)
          handler: handlePortionUpdated
      file: ./src/mappings/Planter.ts
  - kind: ethereum/contract
    name: TreeFactory
    network: rinkeby
    source:
      address: '0x85113dD197F8198458844DDEbB452d616cb28275'
      abi: TreeFactory
      startBlock: 9042600
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Tree
        - Planter
        - UpdateTree
        - RegularTree
        - Owner
      abis:
        - name: TreeFactory
          file: ./abis/TreeFactory.json
      eventHandlers:
        - event: TreePlanted(uint256)
          handler: handleTreePlanted
        # - event: PlantVerified(uint256)
        #   handler: handlePlantVerified
      #   - event: PlantRejected(uint256)
      #     handler: handlePlantRejected
      #   - event: RegularTreePlanted(uint256)
      #     handler: handleRegularTreePlanted
      #   - event: RegularPlantVerified(uint256)
      #     handler: handleRegularPlantVerified
      #   - event: RegularPlantRejected(uint256)
      #     handler: handleRegularPlantRejected
      #   - event: TreeUpdated(uint256)
      #     handler: handleTreeUpdated
      #   - event: UpdateVerified(uint256)
      #     handler: handleUpdateVerified
      #   - event: UpdateRejected(uint256)
      #     handler: handleUpdateRejected
      # callHandlers:
      #   - function: addTree(uint256,string)
      #     handler: handleAddTree
      #   - function: assignTreeToPlanter(uint256,address)
      #     handler: handleAssignTreeToPlanter
      file: ./src/mappings/TreeFactory.ts
