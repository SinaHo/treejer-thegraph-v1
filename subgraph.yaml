specVersion: 0.0.2
description: Treejer V1
repository: https://github.com/SinaHo/treejer-thegraph-v1
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: Planter
    network: rinkeby
    source:
      address: '0xbD02C7909E9202FAb44a2d0b8F8da68d468815C1'
      abi: Planter
      startBlock: 9042600
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Planter
      abis:
        - name: Planter
          file: ./abis/Planter.json
      eventHandlers:
        - event: PlanterJoin(address)
          handler: handlePlanterJoin
        - event: OrganizationJoin(address)
          handler: handleOrganizationJoin
        - event: PlanterUpdated(address)
          handler: handlePlanterUpdated
        - event: AcceptedByOrganization(address)
          handler: handleAcceptedByOrganization
        - event: RejectedByOrganization(address)
          handler: handleRejectedByOrganization
        - event: PortionUpdated(address)
          handler: handlePortionUpdated
      file: ./src/mappings/Planter.ts
  - kind: ethereum/contract
    name: TreeFactory
    network: rinkeby
    source:
      address: '0x88AB6dc80199051E484bAB618e7a051100361F0d'
      abi: TreeFactory
      startBlock: 9042600
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Tree
        - Planter
        - UpdateTree
        - RegularTree
        - Owner
      abis:
        - name: TreeFactory
          file: ./abis/TreeFactory.json
      eventHandlers:
        - event: TreePlanted(uint256)
          handler: handleTreePlanted
        - event: PlantVerified(uint256)
          handler: handlePlantVerified
        - event: PlantRejected(uint256)
          handler: handlePlantRejected
        - event: RegularTreePlanted(uint256)
          handler: handleRegularTreePlanted
        - event: RegularPlantVerified(uint256)
          handler: handleRegularPlantVerified
        - event: RegularPlantRejected(uint256)
          handler: handleRegularPlantRejected
        - event: TreeUpdated(uint256)
          handler: handleTreeUpdated
        - event: UpdateVerified(uint256)
          handler: handleUpdateVerified
        - event: UpdateRejected(uint256)
          handler: handleUpdateRejected
        - event: TreeAdded(uint256)
          handler: handleTreeAdded
        - event: TreeAssigned(uint256)
          handler: handleTreeAssigned
      file: ./src/mappings/TreeFactory.ts

  - kind: ethereum/contract
    name: Auction
    network: rinkeby
    source:
      address: '0xB8869238E0F0e9AB9b57C98662d22eb49ddEDdF8'
      abi: TreeAuction
      startBlock: 9042600
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Tree
        - Planter
        - Auction
        - Bid
        - Owner
      abis:
        - name: TreeAuction
          file: ./abis/TreeAuction.json
      eventHandlers:
        - event: AuctionCreated(uint256)
          handler: handleAuctionCreated
        - event: HighestBidIncreased(uint256,uint256,address,uint256)
          handler: handleHighestBidIncreased
        - event: AuctionSettled(uint256,uint256,address,uint256)
          handler: handleAuctionSettled
        - event: AuctionEnded(uint256,uint256)
          handler: handleAuctionEnded
        - event: AuctionEndTimeIncreased(uint256,uint256)
          handler: handleAuctionEndTimeIncreased

      file: ./src/mappings/Auction.ts
  - kind: ethereum/contract
    name: TreeAttribute
    network: rinkeby
    source:
      address: '0x7f26979d52035A26a21E0F70D84FF170DA003eA3'
      abi: TreeAttribute
      startBlock: 9042650
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Tree
        - TreeAttribute
        - TreeWithAttributeProblem
      abis:
        - name: TreeAttribute
          file: ./abis/TreeAttribute.json
      eventHandlers:
        - event: BuyerRankSet(address,uint8)
          handler: handleBuyerRankSet
        - event: TreeAttributesGenerated(uint256)
          handler: handleTreeAttributesGenerated
        - event: TreeAttributesNotGenerated(uint256)
          handler: handleTreeAttributesNotGenerated
      file: ./src/mappings/TreeAttribute.ts
  - kind: ethereum/contract
    name: IncrementalSell
    network: rinkeby
    source:
      address: '0x271F823A56952419ff1C2770F332D3856D0eeA47'
      abi: IncrementalSell
      startBlock: 9061500
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Tree
        - IncrementalSell
        - Owner
      abis:
        - name: IncrementalSell
          file: ./abis/IncrementalSell.json
      eventHandlers:
        - event: IncrementalSellUpdated()
          handler: handleIncrementalSellUpdated
        - event: IncrementalTreeSold(uint256,address,uint256)
          handler: handleIncrementalTreeSold
      file: ./src/mappings/IncrementalSell.ts
  - kind: ethereum/contract
    name: Treasury
    network: rinkeby
    source:
      address: '0x83E181B34A73ccac2c7b1D5528D851136ce095d3'
      abi: Treasury
      startBlock: 9061510
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Tree
        - TreeFund
        - Owner
        - FundDistribution
      abis:
        - name: Treasury
          file: ./abis/Treasury.json
      eventHandlers:
        - event: DistributionModelAdded(uint256)
          handler: handleDistributionModelAdded
        - event: FundDistributionModelAssigned(uint256,uint256,uint256)
          handler: handleFundDistributionModelAssigned
        - event: DistributionModelOfTreeNotExist(string)
          handler: handleDistributionModelOfTreeNotExist
        - event: PlanterFunded(uint256,address,uint256)
          handler: handlePlanterFunded
        - event: TreeResearchBalanceWithdrawn(uint256,address,string)
          handler: handleTreeResearchBalanceWithdrawn
        - event: LocalDevelopBalanceWithdrawn(uint256,address,string)
          handler: handleLocalDevelopBalanceWithdrawn
        - event: RescueBalanceWithdrawn(uint256,address,string)
          handler: handleRescueBalanceWithdrawn
        - event: TreejerDevelopBalanceWithdrawn(uint256,address,string)
          handler: handleTreejerDevelopBalanceWithdrawn
        - event: OtherBalanceWithdrawn1(uint256,address,string)
          handler: handleOtherBalanceWithdrawn1
        - event: OtherBalanceWithdrawn2(uint256,address,string)
          handler: handleOtherBalanceWithdrawn2
        - event: PlanterBalanceWithdrawn(uint256,address)
          handler: handlePlanterBalanceWithdrawn
        - event: TreeFunded(uint256,uint256,uint256)
          handler: handleTreeFunded
      file: ./src/mappings/Treasury.ts

  - kind: ethereum/contract
    name: RegularSell
    network: rinkeby
    source:
      address: '0x80409b88A92E5Ee66F18Ad43dCfb2F87cddc41Ca'
      abi: RegularSell
      startBlock: 9061500
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Tree
        - RegularSell
        - Owner
      abis:
        - name: RegularSell
          file: ./abis/RegularSell.json
      eventHandlers:
        - event: RegularTreeRequsted(uint256,address,uint256)
          handler: handleRegularTreeRequsted
        - event: RegularMint(address,uint256)
          handler: handleRegularMint
        - event: RegularTreeRequstedById(uint256,address,uint256)
          handler: handleRegularTreeRequstedById
      file: ./src/mappings/RegularSell.ts
