specVersion: 0.0.2
description: Treejer V1
repository: https://github.com/SinaHo/treejer-thegraph-v1
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: Planter
    network: rinkeby
    source:
      address: '0xe3f3b40F7132d15FD7618AB8D24E0aB9584116ED'
      abi: Planter
      startBlock: 9528995
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Planter
      abis:
        - name: Planter
          file: ./abis/Planter.json
        # - name: PlanterFund
        #   file: ./abis/PlanterFund.json
      eventHandlers:
        - event: PlanterJoined(address)
          handler: handlePlanterJoined
        - event: OrganizationJoined(address)
          handler: handleOrganizationJoined
        - event: PlanterUpdated(address)
          handler: handlePlanterUpdated
        - event: AcceptedByOrganization(address)
          handler: handleAcceptedByOrganization
        - event: RejectedByOrganization(address)
          handler: handleRejectedByOrganization
        - event: OrganizationMemberShareUpdated(address)
          handler: handleOrganizationMemberShareUpdated
      file: ./src/mappings/Planter.ts
      
  - kind: ethereum/contract
    name: Tree
    network: rinkeby
    source:
      address: '0xa69aB5Cb498a854e16eb88a1545D6e5B03c72034'
      abi: Tree
      startBlock: 9529020
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Tree
        - Owner
      abis:
        - name: Tree
          file: ./abis/Tree.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,indexed uint256)
          handler: handleTransfer
      file: ./src/mappings/Tree.ts      

  - kind: ethereum/contract
    name: TreeFactory
    network: rinkeby
    source:
      address: '0xd4906bFCe031f1b77baC6B02fae535c8C663FB34'
      abi: TreeFactory
      startBlock: 9529030
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Tree
        - TempTree
        - Planter
        - TreeUpdate
        - Funder
      abis:
        - name: TreeFactory
          file: ./abis/TreeFactory.json
      eventHandlers:
        - event: TreeListed(uint256)
          handler: handleTreeListed
        - event: TreeAssigned(uint256)
          handler: handleTreeAssigned
        - event: AssignedTreePlanted(uint256)
          handler: handleAssignedTreePlanted
        - event: TreePlanted(uint256)
          handler: handleTreePlanted
        - event: TreeVerified(uint256,uint256)
          handler: handleTreeVerified
        - event: TreeRejected(uint256)
          handler: handleTreeRejected
        - event: AssignedTreeVerified(uint256)
          handler: handleAssignedTreeVerified
        - event: AssignedTreeRejected(uint256)
          handler: handleAssignedTreeRejected
        - event: TreeUpdated(uint256)
          handler: handleTreeUpdated
        - event: TreeUpdatedVerified(uint256)
          handler: handleTreeUpdatedVerified
        - event: TreeUpdateRejected(uint256)
          handler: handleTreeUpdateRejected
        - event: TreeSpecsUpdated(uint256,string)
          handler: handleTreeSpecsUpdated
      file: ./src/mappings/TreeFactory.ts

  - kind: ethereum/contract
    name: Auction
    network: rinkeby
    source:
      address: '0x17d836ffAC9a5bFcC33c68D7A5899Fc4D86BFe45'
      abi: Auction
      startBlock: 9528979
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Tree
        - Planter
        - Auction
        - Bid
        - Funder
      abis:
        - name: Auction
          file: ./abis/Auction.json
        - name: RegularSale
          file: ./abis/RegularSale.json
      eventHandlers:
        - event: AuctionCreated(uint256)
          handler: handleAuctionCreated
        - event: HighestBidIncreased(uint256,uint256,address,uint256,address)
          handler: handleHighestBidIncreased
        - event: AuctionSettled(uint256,uint256,address,uint256,address)
          handler: handleAuctionSettled
        - event: AuctionEnded(uint256,uint256)
          handler: handleAuctionEnded
        - event: AuctionEndTimeIncreased(uint256,uint256)
          handler: handleAuctionEndTimeIncreased
      file: ./src/mappings/Auction.ts

  - kind: ethereum/contract
    name: IncrementalSale
    network: rinkeby
    source:
      address: '0x2DdC631b6f08E5835640EFdeB23222093f97cF3c'
      abi: IncrementalSale
      startBlock: 9528987
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Tree
        - IncrementalSale
        - Funder
      abis:
        - name: IncrementalSale
          file: ./abis/IncrementalSale.json
        - name: RegularSale
          file: ./abis/RegularSale.json
      eventHandlers:
        - event: IncrementalSaleUpdated()
          handler: handleIncrementalSaleUpdated
        - event: IncrementalSaleDataUpdated()
          handler: handleIncrementalSaleDataUpdated
        - event: TreeFunded(address,address,address,uint256,uint256)
          handler: handleTreeFunded
      file: ./src/mappings/IncrementalSale.ts

  - kind: ethereum/contract
    name: RegularSale
    network: rinkeby
    source:
      address: '0x183c89063392E1565ccCe42B02d97BefB01E4D42'
      abi: RegularSale
      startBlock: 9528999
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Tree
        - RegularSale
        - Funder
      abis:
        - name: RegularSale
          file: ./abis/RegularSale.json
      eventHandlers:
        - event: TreeFunded(address,address,address,uint256,uint256)
          handler: handleTreeFunded
        - event: RegularMint(address,uint256,uint256)
          handler: handleRegularMint
        - event: TreeFundedById(address,address,address,uint256,uint256)
          handler: handleTreeFundedById
        - event: PriceUpdated(uint256)
          handler: handlePriceUpdated
        - event: ReferralRewardClaimed(address,uint256,uint256)
          handler: handleReferralRewardClaimed
      file: ./src/mappings/RegularSale.ts

  - kind: ethereum/contract
    name: PlanterFund
    network: rinkeby
    source:
      address: '0x0b68BA6Fd1d3CD0f14189bB3e2F0cB3b79351437'
      abi: PlanterFund
      startBlock: 9529012
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - TotalFund
      abis:
        - name: PlanterFund
          file: ./abis/PlanterFund.json
      eventHandlers:
        - event: ProjectedEarningUpdated(uint256,uint256,uint256)
          handler: handleProjectedEarningUpdated
        - event: PlanterTotalClaimedUpdated(uint256,address,uint256,address)
          handler: handlePlanterTotalClaimedUpdated
        - event: BalanceWithdrew(uint256,address)
          handler: handleBalanceWithdrew
      file: ./src/mappings/PlanterFund.ts

  - kind: ethereum/contract
    name: Allocation
    network: rinkeby
    source:
      address: '0x771518c6e48869Fe84Da36416DBC0542cd3013bB'
      abi: Allocation
      startBlock: 9529008
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - TotalFund
      abis:
        - name: Allocation
          file: ./abis/Allocation.json
      eventHandlers:
        - event: AllocationDataAdded(uint256)
          handler: handleAllocationDataAdded
        - event: AllocationToTreeAssigned(uint256)
          handler: handleAllocationToTreeAssigned
      file: ./src/mappings/Allocation.ts

  - kind: ethereum/contract
    name: DaiFund
    network: rinkeby
    source:
      address: '0x146cf5EcB413CbB2B65D6aD3bD75aDFe714Ec1f1'
      abi: DaiFund
      startBlock: 9529004
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - TotalFund
      abis:
        - name: DaiFund
          file: ./abis/DaiFund.json
        - name: Allocation
          file: ./abis/Allocation.json
      eventHandlers:
        - event: ResearchBalanceWithdrew(uint256,address,string)
          handler: handleResearchBalanceWithdrew
        - event: LocalDevelopmentBalanceWithdrew(uint256,address,string)
          handler: handleLocalDevelopmentBalanceWithdrew
        - event: InsuranceBalanceWithdrew(uint256,address,string)
          handler: handleInsuranceBalanceWithdrew
        - event: TreasuryBalanceWithdrew(uint256,address,string)
          handler: handleTreasuryBalanceWithdrew
        - event: TreeFunded(uint256,uint256,uint256)
          handler: handleTreeFunded
      file: ./src/mappings/DaiFund.ts

  - kind: ethereum/contract
    name: WethFund
    network: rinkeby
    source:
      address: '0x76dFa4D77790d02ddBfE009fb8E2251327F7EEe8'
      abi: WethFund
      startBlock: 9529016
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - TotalFund
      abis:
        - name: WethFund
          file: ./abis/WethFund.json
        - name: Allocation
          file: ./abis/Allocation.json
      eventHandlers:
        - event: ResearchBalanceWithdrew(uint256,address,string)
          handler: handleResearchBalanceWithdrew
        - event: LocalDevelopmentBalanceWithdrew(uint256,address,string)
          handler: handleLocalDevelopmentBalanceWithdrew
        - event: InsuranceBalanceWithdrew(uint256,address,string)
          handler: handleInsuranceBalanceWithdrew
        - event: TreasuryBalanceWithdrew(uint256,address,string)
          handler: handleTreasuryBalanceWithdrew
        - event: TreeFunded(uint256,uint256,uint256)
          handler: handleTreeFunded
      file: ./src/mappings/WethFund.ts

  - kind: ethereum/contract
    name: Attribute
    network: rinkeby
    source:
      address: '0x062eB91b76bE03BfEB60ACADA47F3871D07D8ead'
      abi: Attribute
      startBlock: 9529025
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Tree
        - Attribute
        - TreeWithAttributeProblem
      abis:
        - name: Attribute
          file: ./abis/Attribute.json
        - name: Tree
          file: ./abis/Tree.json
      eventHandlers:
        - event: AttributeGenerated(uint256)
          handler: handleAttributeGenerated
        - event: AttributeGenerationFailed(uint256)
          handler: handleAttributeGenerationFailed
      file: ./src/mappings/Attribute.ts

  - kind: ethereum/contract
    name: HonoraryTree
    network: rinkeby
    source:
      address: '0x2C5EFc3121C6253365A20926fd5D846530B42a71'
      abi: HonoraryTree
      startBlock: 9528983
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Tree
        - HonoraryTree
        - HonoraryTreeRecipient
      abis:
        - name: HonoraryTree
          file: ./abis/HonoraryTree.json
      eventHandlers:
        - event: TreeRangeSet()
          handler: handleTreeRangeSet
        # - event: TreeRangeReleased()
        #   handler: handleTreeRangeReleased
        - event: Claimed(uint256)
          handler: handleClaimed 
        - event: ClaimFailed(address)
          handler: handleRecipientAdded
        - event: RecipientAdded(address)
          handler: handleRecipientAdded
        - event: RecipientUpdated(address)
          handler: handleRecipientUpdated
      file: ./src/mappings/HonoraryTree.ts    

