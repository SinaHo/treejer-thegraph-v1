specVersion: 0.0.2
description: Treejer V1
repository: https://github.com/SinaHo/treejer-thegraph-v1
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: Planter
    network: rinkeby
    source:
      address: '0x37Cc39F92664a503B9C35b7bc35777b17F1b7ae8'
      abi: Planter
      startBlock: 9452705
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Planter
      abis:
        - name: Planter
          file: ./abis/Planter.json
        # - name: PlanterFund
        #   file: ./abis/PlanterFund.json
      eventHandlers:
        - event: PlanterJoined(address)
          handler: handlePlanterJoined
        - event: OrganizationJoined(address)
          handler: handleOrganizationJoined
        - event: PlanterUpdated(address)
          handler: handlePlanterUpdated
        - event: AcceptedByOrganization(address)
          handler: handleAcceptedByOrganization
        - event: RejectedByOrganization(address)
          handler: handleRejectedByOrganization
        - event: OrganizationMemberShareUpdated(address)
          handler: handleOrganizationMemberShareUpdated
      file: ./src/mappings/Planter.ts
  - kind: ethereum/contract
    name: TreeFactory
    network: rinkeby
    source:
      address: '0x6E93F652D71C058c62fa8F15fc3225e24160faf7'
      abi: TreeFactory
      startBlock: 9452737
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Tree
        - TempTree
        - Planter
        - TreeUpdate
        - Funder
      abis:
        - name: TreeFactory
          file: ./abis/TreeFactory.json
      eventHandlers:
        - event: TreeListed(uint256)
          handler: handleTreeListed
        - event: TreeAssigned(uint256)
          handler: handleTreeAssigned
        - event: AssignedTreePlanted(uint256)
          handler: handleAssignedTreePlanted
        - event: TreePlanted(uint256)
          handler: handleTreePlanted
        - event: TreeVerified(uint256)
          handler: handleTreeVerified
        - event: TreeRejected(uint256)
          handler: handleTreeRejected
        - event: AssignedTreeVerified(uint256)
          handler: handleAssignedTreeVerified
        - event: AssignedTreeRejected(uint256)
          handler: handleAssignedTreeRejected
        - event: TreeUpdated(uint256)
          handler: handleTreeUpdated
        - event: TreeUpdatedVerified(uint256)
          handler: handleTreeUpdatedVerified
        - event: TreeUpdateRejected(uint256)
          handler: handleTreeUpdateRejected
        - event: TreeSpecsUpdated(uint256,string)
          handler: handleTreeSpecsUpdated
      file: ./src/mappings/TreeFactory.ts
  - kind: ethereum/contract
    name: Auction
    network: rinkeby
    source:
      address: '0xd00AC1B5055d3A4713f80Fc2E037Da3f809b743E'
      abi: Auction
      startBlock: 9452691
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Tree
        - Planter
        - Auction
        - Bid
        - Funder
      abis:
        - name: Auction
          file: ./abis/Auction.json
      eventHandlers:
        - event: AuctionCreated(uint256)
          handler: handleAuctionCreated
        - event: HighestBidIncreased(uint256,uint256,address,uint256,address)
          handler: handleHighestBidIncreased
        - event: AuctionSettled(uint256,uint256,address,uint256,address)
          handler: handleAuctionSettled
        - event: AuctionEnded(uint256,uint256)
          handler: handleAuctionEnded
        - event: AuctionEndTimeIncreased(uint256,uint256)
          handler: handleAuctionEndTimeIncreased
      file: ./src/mappings/Auction.ts
  - kind: ethereum/contract
    name: IncrementalSale
    network: rinkeby
    source:
      address: '0xd5aa046c75D7b0d83BD8d0986039E881C4107165'
      abi: IncrementalSale
      startBlock: 9452699
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Tree
        - IncrementalSale
        - Funder
      abis:
        - name: IncrementalSale
          file: ./abis/IncrementalSale.json
      eventHandlers:
        - event: IncrementalSaleUpdated()
          handler: handleIncrementalSaleUpdated
        - event: IncrementalSaleDataUpdated()
          handler: handleIncrementalSaleDataUpdated
        - event: TreeFunded(address,address,address,uint256,uint256)
          handler: handleTreeFunded
      file: ./src/mappings/IncrementalSale.ts

  - kind: ethereum/contract
    name: RegularSale
    network: rinkeby
    source:
      address: '0x284A8C079Af3EA02669e5B9e55d675CA7cE4253a'
      abi: RegularSale
      startBlock: 9452709
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Tree
        - RegularSale
        - Funder
      abis:
        - name: RegularSale
          file: ./abis/RegularSale.json
      eventHandlers:
        - event: TreeFunded(address,address,address,uint256,uint256)
          handler: handleTreeFunded
        - event: RegularMint(address,uint256,uint256)
          handler: handleRegularMint
        - event: TreeFundedById(address,address,address,uint256,uint256)
          handler: handleTreeFundedById
        - event: PriceUpdated(uint256)
          handler: handlePriceUpdated
      file: ./src/mappings/RegularSale.ts

  - kind: ethereum/contract
    name: PlanterFund
    network: rinkeby
    source:
      address: '0x35684D1C771457DFBaf96e0245477cE5953a3A9F'
      abi: PlanterFund
      startBlock: 9452721
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - TotalFund
      abis:
        - name: PlanterFund
          file: ./abis/PlanterFund.json
      eventHandlers:
        - event: ProjectedEarningUpdated(uint256,uint256,uint256)
          handler: handleProjectedEarningUpdated
        - event: PlanterTotalClaimedUpdated(uint256,address,uint256,address)
          handler: handlePlanterTotalClaimedUpdated
        - event: BalanceWithdrew(uint256,address)
          handler: handleBalanceWithdrew
      file: ./src/mappings/PlanterFund.ts
  - kind: ethereum/contract
    name: Allocation
    network: rinkeby
    source:
      address: '0xDF0d58f908f24a5dEf66928236a20E2077A2474a'
      abi: Allocation
      startBlock: 9452717
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - TotalFund
      abis:
        - name: Allocation
          file: ./abis/Allocation.json
      eventHandlers:
        - event: AllocationDataAdded(uint256)
          handler: handleAllocationDataAdded
        - event: AllocationToTreeAssigned(uint256)
          handler: handleAllocationToTreeAssigned
      file: ./src/mappings/Allocation.ts

  - kind: ethereum/contract
    name: DaiFund
    network: rinkeby
    source:
      address: '0x0D1b06C3D5B1F8CebF10Aa7991Fa89fcf9ac98e8'
      abi: DaiFund
      startBlock: 9452713
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - TotalFund
      abis:
        - name: DaiFund
          file: ./abis/DaiFund.json
        - name: Allocation
          file: ./abis/Allocation.json
      eventHandlers:
        - event: ResearchBalanceWithdrew(uint256,address,string)
          handler: handleResearchBalanceWithdrew
        - event: LocalDevelopmentBalanceWithdrew(uint256,address,string)
          handler: handleLocalDevelopmentBalanceWithdrew
        - event: InsuranceBalanceWithdrew(uint256,address,string)
          handler: handleInsuranceBalanceWithdrew
        - event: TreasuryBalanceWithdrew(uint256,address,string)
          handler: handleTreasuryBalanceWithdrew
        - event: TreeFunded(uint256,uint256,uint256)
          handler: handleTreeFunded

      file: ./src/mappings/DaiFund.ts
  - kind: ethereum/contract
    name: WethFund
    network: rinkeby
    source:
      address: '0xF56A9f7dE67B1022CbAF568b719650F59Fa47296'
      abi: WethFund
      startBlock: 9452725
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - TotalFund
      abis:
        - name: WethFund
          file: ./abis/WethFund.json
        - name: Allocation
          file: ./abis/Allocation.json
      eventHandlers:
        - event: ResearchBalanceWithdrew(uint256,address,string)
          handler: handleResearchBalanceWithdrew
        - event: LocalDevelopmentBalanceWithdrew(uint256,address,string)
          handler: handleLocalDevelopmentBalanceWithdrew
        - event: InsuranceBalanceWithdrew(uint256,address,string)
          handler: handleInsuranceBalanceWithdrew
        - event: TreasuryBalanceWithdrew(uint256,address,string)
          handler: handleTreasuryBalanceWithdrew
        - event: TreeFunded(uint256,uint256,uint256)
          handler: handleTreeFunded
      file: ./src/mappings/WethFund.ts
  - kind: ethereum/contract
    name: Attribute
    network: rinkeby
    source:
      address: '0x3F4CbdDFc8942AdC52Dd2F3a24934d3A58583a20'
      abi: Attribute
      startBlock: 9452733
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Tree
        - Attribute
        - TreeWithAttributeProblem
      abis:
        - name: Attribute
          file: ./abis/Attribute.json
        - name: Tree
          file: ./abis/Tree.json
      eventHandlers:
        - event: AttributeGenerated(uint256)
          handler: handleAttributeGenerated
        - event: AttributeGenerationFailed(uint256)
          handler: handleAttributeGenerationFailed
      file: ./src/mappings/Attribute.ts